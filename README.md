# poll-story-telegram-bot
 
## Описание

Этот скрипт предназначен для автоматической публикации опросов в Telegram-канале, создавая интерактивную историю.
Бот сделан [Denis Sexy IT](http://t.me/denissexy).

### Как это работает

1.  Скрипт читает текст истории из файла `story.txt`.
2.  Он отслеживает текущую позицию в истории с помощью файла `story_state.json`.
3.  Каждый запуск скрипт отправляет следующий сегмент истории как опрос в указанный Telegram-канал.
4.  Опрос содержит варианты продолжения (если они есть в тексте истории) или просто следующий абзац.

### Сброс состояния истории

Чтобы начать историю заново или исправить ошибки, удалите файл `story_state.json`. При следующем запуске скрипт начнет публикацию с самого начала `story.txt`.

### Хостинг и запуск

Скрипт рассчитан на запуск на VPS (виртуальном частном сервере) или любом другом сервере, который может выполнять задачи по расписанию. Рекомендуется использовать `cron` для регулярного запуска скрипта (например, каждые 30 минут или каждый час, в зависимости от желаемой частоты публикаций).

Пример команды для `crontab`:
```bash
*/30 * * * * cd /path/to/your/script/directory && /usr/bin/python3 telegram_poster.py >> /path/to/your/logfile.log 2>&1
```
*Замените `/path/to/your/script/directory` на реальный путь к папке со скриптом.*
*Замените `/usr/bin/python3` на ваш путь к интерпретатору Python 3.*
*Замените `/path/to/your/logfile.log` на путь к файлу логов.*

### Установка зависимостей

Перед первым запуском скрипта необходимо установить все требуемые библиотеки Python. Перейдите в каталог проекта и выполните команду:

```bash
pip install -r requirements.txt
```
*Убедитесь, что у вас установлен `pip` для Python 3.*

### Требования

1.  **Создайте Telegram-бота**: Используйте BotFather в Telegram для создания нового бота. Вы получите токен API, который понадобится для скрипта.
2.  **Добавьте бота в канал**: Бот должен быть добавлен в ваш Telegram-канал как администратор с правами на отправку сообщений и создание опросов.
3.  **Настройте `telegram_poster.py`**: (Для смелых) Укажите ваш API токен бота и ID вашего канала непосредственно в файле `telegram_poster.py` в соответствующих переменных (`API_TOKEN` и `CHANNEL_ID`).
